import React from 'react';
import { connect } from 'react-redux';
import classnames from 'classnames';
import { Link, hashHistory } from 'react-router';
import APPCONFIG from 'constants/Config';
import {
    togglCollapsedNav
} from '../../actions';
import SidenavContent from './SidenavContent';

class Sidebar extends React.Component {

    componentDidMount() {
        // AutoCloseMobileNav
        const $body = $('#body');

        if (APPCONFIG.AutoCloseMobileNav) {
            hashHistory.listen((location) => {
                setTimeout(() => {
                    $body.removeClass('sidebar-mobile-open');
                }, 0);
            });
        }
    }

    onToggleCollapsedNav = (e) => {
        const val = !this.props.navCollapsed;
        const { handleToggleCollapsedNav } = this.props;
        handleToggleCollapsedNav(val);
    }

    render() {
        const { navCollapsed, colorOption } = this.props;
        let toggleIcon = null;
        if (navCollapsed) {
            toggleIcon = <i className="material-icons">chevron_right</i>;
        } else {
            toggleIcon = <i className="material-icons">chevron_left</i>;
        }

        return (
            <nav className="app-sidebar">
                <section className="sidebar-header">
                    <svg className="logo full-size" version="1.1" id="Layer_1" x="0px" y="0px" viewBox="0 0 1258.8 448">
						<g className="st0">
							<defs>
								<rect id="SVGID_1_" x="2.8" y="1" width="1258" height="445"/>
							</defs>
							<clipPath id="SVGID_2_" className="st1">
								<use/>
							</clipPath>
							<rect x="2.8" y="2.1" className="st2" width="1258" height="445"/>
						</g>
						<text transform="matrix(1 0 0 1 14.8164 374)" className="st3 st4 st5 st6">ContentManager</text>
						<g>
							<path className="st7" d="M122.4,310.6l-7.8,9.9c-8.8-9-21.2-14.3-33.7-14.3c-25.7,0-46.4,19.9-46.4,44.9c0,24.9,20.7,44.9,46.4,44.9	c12.5,0,24.7-5.2,33.7-13.7l8,9c-11.2,10.6-26.5,17.6-42.3,17.6c-32.9,0-58.9-25.6-58.9-57.8c0-31.9,26.4-57.1,59.4-57.1
								C96.4,294,111.5,300.3,122.4,310.6z"/>
							<path className="st7" d="M210.8,365.3c0,25.7-18.1,43.5-43.5,43.5c-25.4,0-43.5-17.7-43.5-43.5c0-25.6,18.1-43.1,43.5-43.1
								C192.7,322.2,210.8,339.7,210.8,365.3z M136.5,365.4c0,18.9,12.9,31.9,30.8,31.9c17.9,0,30.8-13,30.8-31.9
								c0-18.7-12.9-31.7-30.8-31.7C149.4,333.7,136.5,346.7,136.5,365.4z"/>
							<path className="st7" d="M302.6,355.4v52.9h-12.7v-49.5c0-15.1-9.1-24.1-24.2-24.1c-16.9,0.2-27.3,11.2-28.8,27.5v46.1h-12.7v-85.8
								h12.7v18.9c6-13,17.6-19.2,33.2-19.4C290.5,322,302.6,334.7,302.6,355.4z"/>
							<path className="st7" d="M366.2,402.4c-6,4.1-12.5,6.3-19.4,6.5c-12.5,0-21.8-7.5-21.8-24.4v-49h-12.4v-10.3H325v-22.6h12.5v22.6
								l27.2-0.2v10.4h-27.2v46.7c0,10.4,4.1,14.3,11.4,14.3c4.4,0,9-1.5,13.7-4.4L366.2,402.4z"/>
							<path className="st7" d="M449,370.3h-70c2.3,16.8,14.5,27.3,31.1,27.3c10.6,0,19.9-3.7,26.5-10.7l7,7.5c-8.1,9.1-20.2,14.3-34.5,14.3
								c-25.2,0-42.6-17.7-42.6-43.3c0-25.6,17.6-43.3,42.5-43.3C436.7,322,450.3,341.2,449,370.3z M437.6,359.9
								c-0.8-16.4-11.9-26.9-28.6-26.9c-16.3,0-28,10.6-29.9,26.9H437.6z"/>
							<path className="st7" d="M540.3,355.4v52.9h-12.7v-49.5c0-15.1-9.1-24.1-24.3-24.1c-16.9,0.2-27.3,11.2-28.8,27.5v46.1h-12.7v-85.8
								h12.7v18.9c6-13,17.6-19.2,33.2-19.4C528.3,322,540.3,334.7,540.3,355.4z"/>
							<path className="st7" d="M604,402.4c-6,4.1-12.5,6.3-19.4,6.5c-12.5,0-21.8-7.5-21.8-24.4v-49h-12.4v-10.3h12.4v-22.6h12.5v22.6
								l27.2-0.2v10.4h-27.2v46.7c0,10.4,4.1,14.3,11.4,14.3c4.4,0,9-1.5,13.7-4.4L604,402.4z"/>
							<path className="st7" d="M719.2,408.3l-0.2-93.9l-41.5,81.9h-7.8l-41.3-81.9v93.9H616V294.3h16.1l41.7,82l41.5-82h15.9v113.9H719.2z"/>
							<path className="st7" d="M808.4,395.1c-6.8,9.3-17.7,13.8-31.4,13.8c-17.7,0-29.1-11.4-29.1-26.2c0-15,11.9-24.4,32.1-24.6H808v-5
								c0-12.5-7.8-20-22.9-20c-9.4,0-18.2,3.6-27.2,9.8l-5.4-9.3c11.1-7.3,20.3-11.6,35-11.6c21.2,0,32.9,11.2,33,29.6l0.2,56.6h-12.4
								V395.1z M808.2,378.6v-10.3h-26.7c-14.3,0-21.8,4.4-21.8,13.8c0,9.4,7.6,15.6,19.7,15.6C793.9,397.8,804.9,390.5,808.2,378.6z"/>
							<path className="st7" d="M918.5,355.4v52.9h-12.7v-49.5c0-15.1-9.1-24.1-24.2-24.1c-16.9,0.2-27.3,11.2-28.8,27.5v46.1h-12.7v-85.8
								h12.7v18.9c6-13,17.6-19.2,33.2-19.4C906.5,322,918.5,334.7,918.5,355.4z"/>
							<path className="st7" d="M991.1,395.1c-6.8,9.3-17.7,13.8-31.4,13.8c-17.7,0-29.1-11.4-29.1-26.2c0-15,11.9-24.4,32.1-24.6h28.2v-5
								c0-12.5-7.8-20-22.9-20c-9.4,0-18.2,3.6-27.2,9.8l-5.4-9.3c11.1-7.3,20.3-11.6,35-11.6c21.2,0,32.9,11.2,33,29.6l0.2,56.6h-12.4
								V395.1z M991,378.6v-10.3h-26.7c-14.3,0-21.8,4.4-21.8,13.8c0,9.4,7.6,15.6,19.7,15.6C976.6,397.8,987.7,390.5,991,378.6z"/>
							<path className="st7" d="M1097.6,399.3c0,25.1-17.1,40.9-43.1,40.9c-13.5-0.2-24.7-4.6-35.2-12.4l5.9-9.8c8.5,7,17.4,10.7,28.8,10.9
								c18.7,0,30.9-11.4,30.9-29.3v-13c-6,11.4-17.1,17.9-31.6,17.9c-23.1,0-39.1-17.1-39.1-41.5c0-23.9,15.8-40.8,38.7-41
								c14.6,0,25.7,6.5,31.9,17.9v-17.4h12.7V399.3z M1084.9,363.5c0-17.9-12.2-30.4-29.3-30.4c-17.3,0-29.3,12.7-29.5,30.4
								c0.2,17.6,12.2,30.3,29.5,30.3C1072.7,393.8,1084.9,381.1,1084.9,363.5z"/>
							<path className="st7" d="M1191.3,370.3h-70c2.3,16.8,14.5,27.3,31.1,27.3c10.6,0,19.9-3.7,26.5-10.7l7,7.5
								c-8.1,9.1-20.2,14.3-34.5,14.3c-25.2,0-42.6-17.7-42.6-43.3c0-25.6,17.6-43.3,42.5-43.3C1178.9,322,1192.6,341.2,1191.3,370.3z
								 M1179.9,359.9c-0.8-16.4-11.9-26.9-28.6-26.9c-16.3,0-28,10.6-29.9,26.9H1179.9z"/>
							<path className="st7" d="M1216.8,341.5c5.7-12.5,16.3-19.4,30.8-19.5v12.9c-18.1-0.3-29.3,10.9-30.8,27.8v45.6h-12.7v-85.8h12.7V341.5z
								"/>
						</g>
						<g id="Scala_1_">
							<path id="A2" className="st7" d="M890.9,10.3L785,237.7h37.4l25.4-56.3h86.6l24.8,56.3h37.7L890.9,10.3z M860.9,151.7l22.4-49.9
								c2.5-5.8,5.2-13.8,8-24.8c3.1,11,5.8,19,8.3,24.8l22.4,49.9H860.9z"/>
							<polygon id="L" className="st7" points="684.4,9.9 648.9,9.9 648.9,237.7 764,237.7 764,205.9 684.4,205.9 	"/>
							<path id="A" className="st7" d="M517.3,10.3L411.4,237.7h37.4l25.4-56.3h86.6l24.8,56.3h37.7L517.3,10.3z M487.3,151.7l22.4-49.9
								c2.4-5.8,5.2-13.8,8-24.8c3.1,11,5.8,19,8.3,24.8l22.3,49.9H487.3z"/>
							<path id="C" className="st7" d="M240.1,40.6c-21.7,21.4-33.4,50.2-33.4,82.3c0,31.8,11.6,61.2,33.1,82.4c21.4,21.1,50.2,32.5,83.9,32.5
								c26.3,0,48.7-6.8,67.9-20.5v-40.1c-21.4,18.4-44.7,27.6-70.7,27.6c-43.8,0-77.2-33.4-77.2-81.4c0-48.7,32.8-82.6,80.8-82.6
								c24.8,0,47.1,8.6,67.3,25.7l1.8-35.8c-21.4-15-44.4-22.7-70.7-22.7C290.3,7.8,261.8,19.1,240.1,40.6"/>
							<path id="S" className="st7" d="M184.1,170.1c0,40.7-31,67.7-82.6,67.7c-42.5,0-70.4-17.8-78.8-49.6L55.2,175c5.9,19.6,22.6,30,48,30
								c24.4,0,39.4-12.9,39.4-32.4c0-21.5-18.5-26.7-44.2-37.7c-44.2-19-68.7-33.7-68.7-66.8c0-35.2,29.6-60,74.9-60
								c36.9,0,62.4,13.2,71.8,36.2l-31.7,14.4c-9.8-13.4-21.3-19.9-37-19.9c-21.9,0-35.5,11-35.5,27.6c0,21.1,19.5,27.6,47.4,38.9
								C163.6,122.9,184.1,138.5,184.1,170.1"/>
						</g>
						<g id="logo">
							<path className="st10" d="M1207.2,10H1055c-22.9,0-41.4,18.5-41.4,41.4v152.1c0,22.9,18.5,41.4,41.4,41.4h152.1
								c22.8,0,41.4-18.5,41.4-41.4V51.4C1248.6,28.5,1230,10,1207.2,10"/>
							<path className="st8" d="M1207.2,10H1055c-22.9,0-41.4,18.5-41.4,41.4v152.1c0,22.9,18.5,41.4,41.4,41.4h152.1
								c22.8,0,41.4-18.5,41.4-41.4V51.4C1248.6,28.5,1230,10,1207.2,10 M1064.1,220.5c-14.3,0-26-11.6-26-26c0-14.4,11.6-26,26-26
								c14.4,0,26,11.7,26,26C1090.1,208.9,1078.5,220.5,1064.1,220.5 M1218.3,76.7l-91.4,92.1c-6.5,5.5-16.5,7.5-24.8,4.4
								c-8.4-2.6-15.4-11-16.7-19.5c-2.1-11.7,4.5-21,12.9-28.3l80.9-81.5c6.9-8.1,17.8-10.9,27.9-7.6c6.4,2.1,12.3,7.5,15,13.8
								C1225.8,58.6,1224.3,69.9,1218.3,76.7"/>
							<path className="st7" d="M1252.3,17.2c0,3.8-2.9,6.8-6.8,6.8c-3.8,0-6.7-3-6.7-6.8c0-3.8,2.9-6.7,6.7-6.7
								C1249.4,10.5,1252.3,13.5,1252.3,17.2 M1239.9,17.2c0,3.2,2.4,5.8,5.7,5.8c3.3,0,5.7-2.6,5.7-5.8c0-3.2-2.4-5.8-5.7-5.8
								C1242.3,11.5,1239.9,14,1239.9,17.2 M1244.1,21.1h-1v-7.8h3c1.8,0,2.5,0.8,2.5,2.2c0,1.4-0.9,2-2,2.2l2.3,3.5h-1.1l-2.2-3.5h-1.6
								V21.1z M1245.3,16.9c1.2,0,2.3,0,2.3-1.4c0-1.1-0.9-1.3-1.8-1.3h-1.8v2.7H1245.3z"/>
						</g>
						<rect x="18.8" y="42" className="st9" width="981" height="394"/>
					</svg>

					<svg className="logo min-size" version="1.1" id="Layer_1" x="0px" y="0px" viewBox="0 0 269 420">
						<g>
							<defs>
								<rect id="SVGID_1_" x="0.4" y="-0.9" width="268" height="419"/>
							</defs>
							<clipPath id="SVGID_2_">
								<use/>
							</clipPath>
							<rect x="0.5" y="0.5" className="st0" width="268" height="419"/>
						</g>
						<g>
							<path className="st1" d="M122.6,308.7l-7.8,9.9c-8.8-9-21.2-14.3-33.7-14.3c-25.7,0-46.4,19.9-46.4,44.9c0,24.9,20.7,44.9,46.4,44.9
								c12.5,0,24.7-5.2,33.7-13.7l8,9C111.5,400,96.2,407,80.4,407c-32.9,0-58.9-25.6-58.9-57.8c0-31.9,26.4-57.1,59.4-57.1
								C96.5,292.1,111.7,298.4,122.6,308.7z"/>
							<path className="st1" d="M238.4,406.3l-0.2-93.9l-41.5,81.9h-7.8l-41.3-81.9v93.9h-12.4V292.4h16.1l41.7,82l41.5-82h15.9v113.9H238.4z"
								/>
						</g>
						<g id="logo">
							<path className="st1" d="M210.2,8.1H58c-22.9,0-41.4,18.5-41.4,41.4v152.1c0,22.9,18.5,41.4,41.4,41.4h152.1
								c22.8,0,41.4-18.5,41.4-41.4V49.5C251.5,26.6,233,8.1,210.2,8.1"/>
							<path className="st2" d="M210.2,8.1H58c-22.9,0-41.4,18.5-41.4,41.4v152.1c0,22.9,18.5,41.4,41.4,41.4h152.1
								c22.8,0,41.4-18.5,41.4-41.4V49.5C251.5,26.6,233,8.1,210.2,8.1 M67.1,218.6c-14.3,0-26-11.6-26-26c0-14.4,11.6-26,26-26
								c14.4,0,26,11.7,26,26C93.1,206.9,81.5,218.6,67.1,218.6 M221.3,74.8l-91.4,92.1c-6.5,5.5-16.5,7.5-24.8,4.4
								c-8.4-2.6-15.4-11-16.7-19.5c-2.1-11.7,4.5-21,12.9-28.3L182.2,42c6.9-8.1,17.8-10.9,27.9-7.6c6.4,2.1,12.3,7.5,15,13.8
								C228.7,56.6,227.3,67.9,221.3,74.8"/>
							<path className="st4" d="M255.3,15.3c0,3.8-2.9,6.8-6.8,6.8c-3.8,0-6.7-3-6.7-6.8c0-3.8,2.9-6.7,6.7-6.7
								C252.3,8.6,255.3,11.5,255.3,15.3 M242.8,15.3c0,3.2,2.4,5.8,5.7,5.8c3.3,0,5.7-2.6,5.7-5.8c0-3.2-2.4-5.8-5.7-5.8
								C245.3,9.6,242.8,12.1,242.8,15.3 M247,19.2h-1v-7.8h3c1.8,0,2.5,0.8,2.5,2.2c0,1.4-0.9,2-2,2.2l2.3,3.5h-1.1l-2.2-3.5H247V19.2z
								 M248.3,15c1.2,0,2.3,0,2.3-1.4c0-1.1-0.9-1.3-1.8-1.3H247V15H248.3z"/>
						</g>
						<rect x="-743.6" y="40.1" className="st3" width="981" height="394"/>
					</svg>

                    <a href="javascript:;" className="collapsednav-toggler" onClick={this.onToggleCollapsedNav}>
                        {toggleIcon}
                    </a>
                </section>

                <section className="sidebar-content">
                    <SidenavContent />
                </section>
            </nav>
        );
    }
}

const mapStateToProps = state => ({
    navCollapsed: state.settings.navCollapsed,
    colorOption: state.settings.colorOption
});

const mapDispatchToProps = dispatch => ({
    handleToggleCollapsedNav: (isNavCollapsed) => {
        dispatch(togglCollapsedNav(isNavCollapsed));
    },
});

module.exports = connect(
    mapStateToProps,
    mapDispatchToProps
)(Sidebar);
